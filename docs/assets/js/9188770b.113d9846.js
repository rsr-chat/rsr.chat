"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[213],{3479(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"proto/extensions/rbac","title":"rsr.chat/rbac","description":"This specification is still a draft and is subject to change at any time.","source":"@site/content/proto/1500_extensions/rbac.md","sourceDirName":"proto/1500_extensions","slug":"/proto/extensions/rbac","permalink":"/docs/proto/extensions/rbac","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"rsr.chat/rbac"},"sidebar":"protoSidebar","previous":{"title":"rsr.chat/pending-messages","permalink":"/docs/proto/extensions/pending-messages"},"next":{"title":"rsr.chat/reactions","permalink":"/docs/proto/extensions/reactions"}}');var r=i(4848),t=i(8453);const l={title:"rsr.chat/rbac"},d="rsr.chat/rbac",c={},a=[{value:"Motivation",id:"motivation",level:2},{value:"Capability",id:"capability",level:2},{value:"ISUPPORT Tokens",id:"isupport-tokens",level:2},{value:"Terminology",id:"terminology",level:2},{value:"Permission Identifier Syntax",id:"permission-identifier-syntax",level:2},{value:"Built-in Roles and Default Privilege Mapping",id:"built-in-roles-and-default-privilege-mapping",level:2},{value:"Custom Roles",id:"custom-roles",level:2},{value:"RBACROLE CREATE",id:"rbacrole-create",level:3},{value:"RBACROLE DELETE",id:"rbacrole-delete",level:3},{value:"RBACROLE LIST",id:"rbacrole-list",level:3},{value:"Scope Targets",id:"scope-targets",level:2},{value:"Scope Chain and Evaluation Model",id:"scope-chain-and-evaluation-model",level:2},{value:"Deny Precedence",id:"deny-precedence",level:3},{value:"Short-circuit Evaluation",id:"short-circuit-evaluation",level:3},{value:"Commands",id:"commands",level:2},{value:"RBACSET",id:"rbacset",level:3},{value:"RBACDEL",id:"rbacdel",level:3},{value:"RBACLIST",id:"rbaclist",level:3},{value:"RBACCHECK",id:"rbaccheck",level:3},{value:"RBACWHO",id:"rbacwho",level:3},{value:"Server Numerics",id:"server-numerics",level:2},{value:"Who May Manage Rules",id:"who-may-manage-rules",level:2},{value:"Channel rules",id:"channel-rules",level:3},{value:"Category rules",id:"category-rules",level:3},{value:"Guild rules",id:"guild-rules",level:3},{value:"Server-global rules",id:"server-global-rules",level:3},{value:"Rule management permission",id:"rule-management-permission",level:3},{value:"Consolidated Permission Registry",id:"consolidated-permission-registry",level:2},{value:"Core channel permissions",id:"core-channel-permissions",level:3},{value:"Channel metadata permissions",id:"channel-metadata-permissions",level:3},{value:"Channel membership permissions",id:"channel-membership-permissions",level:3},{value:"Reaction permissions",id:"reaction-permissions",level:3},{value:"Emote permissions",id:"emote-permissions",level:3},{value:"Message link permissions",id:"message-link-permissions",level:3},{value:"Typing notification permissions",id:"typing-notification-permissions",level:3},{value:"DID authentication permissions",id:"did-authentication-permissions",level:3},{value:"Conflict Resolution Between Scope Levels",id:"conflict-resolution-between-scope-levels",level:2},{value:"Allow at channel overriding deny at category",id:"allow-at-channel-overriding-deny-at-category",level:3},{value:"Deny at guild overriding allow at channel",id:"deny-at-guild-overriding-allow-at-channel",level:3},{value:"Interaction with rsr.chat/channel-membership Roles",id:"interaction-with-rsrchatchannel-membership-roles",level:2},{value:"Interaction with rsr.chat/advanced-moderation",id:"interaction-with-rsrchatadvanced-moderation",level:2},{value:"Interaction with Non-Negotiating Clients",id:"interaction-with-non-negotiating-clients",level:2},{value:"Guild Integration",id:"guild-integration",level:2},{value:"Category Integration",id:"category-integration",level:2},{value:"Examples",id:"examples",level:2},{value:"Setting a simple allow rule",id:"setting-a-simple-allow-rule",level:3},{value:"Setting a category-scoped deny rule",id:"setting-a-category-scoped-deny-rule",level:3},{value:"Channel-level allow overriding category-level deny",id:"channel-level-allow-overriding-category-level-deny",level:3},{value:"Per-account override",id:"per-account-override",level:3},{value:"Wildcard permission grant",id:"wildcard-permission-grant",level:3},{value:"DID-scoped permission rule",id:"did-scoped-permission-rule",level:3},{value:"Listing rules for a scope",id:"listing-rules-for-a-scope",level:3},{value:"Checking effective permission",id:"checking-effective-permission",level:3},{value:"Removing a rule",id:"removing-a-rule",level:3},{value:"Creating and using a custom role",id:"creating-and-using-a-custom-role",level:3},{value:"RBACWHO",id:"rbacwho-1",level:3},{value:"Insufficient permission to set a rule",id:"insufficient-permission-to-set-a-rule",level:3},{value:"Guild-wide DID requirement",id:"guild-wide-did-requirement",level:3}];function o(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["This specification is still a ",(0,r.jsx)(n.strong,{children:"draft"})," and is subject to change at any time."]})}),"\n",(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"rsrchatrbac",children:"rsr.chat/rbac"})}),"\n",(0,r.jsx)(n.p,{children:"This extension provides a general-purpose role-based access control system for IRC\nchannels, channel categories, and guilds. It defines a rule language for granting and\ndenying named permissions to roles and accounts, a command surface for managing rules,\nand the evaluation model by which the server resolves permissions at runtime. All\npermission identifiers referenced by other extensions in this suite are governed by\nthe evaluation model defined here."}),"\n",(0,r.jsx)(n.h2,{id:"motivation",children:"Motivation"}),"\n",(0,r.jsxs)(n.p,{children:["Standard IRC access control is limited to a small set of hardcoded channel modes (",(0,r.jsx)(n.code,{children:"+o"}),",\n",(0,r.jsx)(n.code,{children:"+v"}),", ",(0,r.jsx)(n.code,{children:"+b"}),", and so on) with no extensibility, no inheritance, no scoping across channel\nhierarchies, and no support for fine-grained per-feature permissions. The extensions in\nthis suite require a richer model: permissions scoped to categories, guilds, and\nindividual channels; custom roles beyond operator and voice; per-account overrides;\nand integration with identity mechanisms such as ",(0,r.jsx)(n.code,{children:"rsr.chat/did-sasl"}),". This extension\nprovides that model."]}),"\n",(0,r.jsx)(n.h2,{id:"capability",children:"Capability"}),"\n",(0,r.jsxs)(n.p,{children:["This extension is advertised as the ",(0,r.jsx)(n.code,{children:"rsr.chat/rbac"})," capability during CAP negotiation:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"CAP * LS :rsr.chat/rbac\n"})}),"\n",(0,r.jsx)(n.p,{children:"No capability value is used. Limits are communicated via ISUPPORT (see below)."}),"\n",(0,r.jsx)(n.h2,{id:"isupport-tokens",children:"ISUPPORT Tokens"}),"\n",(0,r.jsxs)(n.p,{children:["Servers MUST advertise the following tokens in ",(0,r.jsx)(n.code,{children:"RPL_ISUPPORT"})," (005) when this capability\nis active:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"RBACRULES=<n>"})," \u2014 the maximum number of RBAC rules permitted per scope target\n(channel, category, or guild). A value of ",(0,r.jsx)(n.code,{children:"0"})," indicates no server-imposed limit.\nis negotiated this list MUST match the ",(0,r.jsx)(n.code,{children:"MEMBERROLES"})," token defined by that extension."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"RBACMAXDEPTH=<n>"})," \u2014 the maximum rule inheritance depth when resolving scoped rules\nthrough category and guild hierarchies. Servers MUST NOT enforce a value lower than 3."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:":server 005 nick RBACRULES=256 RBACMAXDEPTH=5 :are supported by this server\n"})}),"\n",(0,r.jsx)(n.p,{children:"If any of these values change after a configuration reload a fresh RPL_ISUPPORT MUST be\nsent to all connected clients."}),"\n",(0,r.jsx)(n.h2,{id:"terminology",children:"Terminology"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Permission"}),": a named capability string identifying a specific action or access right.\nPermission names are defined by individual extensions and listed in their specifications.\nExamples: ",(0,r.jsx)(n.code,{children:"chanmeta.set.topic"}),", ",(0,r.jsx)(n.code,{children:"reaction.add"}),", ",(0,r.jsx)(n.code,{children:"emote.use.animated"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Role"}),": a named rank. The built-in roles are those listed in ",(0,r.jsx)(n.code,{children:"RBACROLES"}),". Custom roles\nMAY be defined within a scope (see Custom Roles)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Subject"}),": the entity to which a rule applies. A subject is one of:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["A role name, e.g. ",(0,r.jsx)(n.code,{children:"op"})," \u2014 applies to all users holding that role."]}),"\n",(0,r.jsxs)(n.li,{children:["An account name, e.g. ",(0,r.jsx)(n.code,{children:"account:alice"})," \u2014 applies to a specific authenticated account."]}),"\n",(0,r.jsxs)(n.li,{children:["A DID, e.g. ",(0,r.jsx)(n.code,{children:"did:did:web:alice.example.com"})," \u2014 applies to any account authenticated\nvia that DID. Only valid when ",(0,r.jsx)(n.code,{children:"rsr.chat/did-sasl"})," is negotiated."]}),"\n",(0,r.jsxs)(n.li,{children:["The default target ",(0,r.jsx)(n.code,{children:"*"})," which applies universally to all clients at the lowest\npriority (always overridden)."]}),"\n",(0,r.jsxs)(n.li,{children:["The wildcard ",(0,r.jsx)(n.code,{children:"authenticated"})," \u2014 applies to all users identified to an account."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Effect"}),": ",(0,r.jsx)(n.code,{children:"allow"}),", ",(0,r.jsx)(n.code,{children:"deny"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Rule"}),": a triple of (subject, permission, effect) associated with a scope target."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Scope target"}),": the entity to which a rule is attached \u2014 a channel, a category\nprefix, a guild, or the server globally."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Scope chain"}),": the ordered list of scope targets consulted during rule evaluation for\na given channel, from most specific to most general (see Evaluation Model)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Inheritance"}),": the propagation of rules from a broader scope target to a narrower one\nunless overridden."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"permission-identifier-syntax",children:"Permission Identifier Syntax"}),"\n",(0,r.jsxs)(n.p,{children:["Permission identifiers are dot-delimited ASCII strings matching the pattern\n",(0,r.jsx)(n.code,{children:"[a-z0-9][a-z0-9_-]*(\\.[a-z0-9*][a-z0-9_*-]*)*"}),". The wildcard component ",(0,r.jsx)(n.code,{children:"*"})," may appear\nas the final segment only and matches any single segment. For example ",(0,r.jsx)(n.code,{children:"chanmeta.set.*"}),"\nmatches ",(0,r.jsx)(n.code,{children:"chanmeta.set.topic"})," and ",(0,r.jsx)(n.code,{children:"chanmeta.set.lang"})," but not ",(0,r.jsx)(n.code,{children:"chanmeta.get"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Servers MUST expand wildcard permission rules at evaluation time and MUST NOT store them\nas literal string matches."}),"\n",(0,r.jsx)(n.h2,{id:"built-in-roles-and-default-privilege-mapping",children:"Built-in Roles and Default Privilege Mapping"}),"\n",(0,r.jsx)(n.p,{children:"The built-in roles map to IRC modes and carry a default set of permissions unless\noverridden by explicit rules. The mapping is:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Role"}),(0,r.jsx)(n.th,{children:"IRC mode equivalent"}),(0,r.jsx)(n.th,{children:"Default implied permissions"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"owner"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"+q"})," or ",(0,r.jsx)(n.code,{children:"+o"})," where +q absent"]}),(0,r.jsx)(n.td,{children:"All permissions in all scopes they own"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"admin"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"+a"})," or ",(0,r.jsx)(n.code,{children:"+o"})," where +a absent"]}),(0,r.jsxs)(n.td,{children:["All permissions except those reserved to ",(0,r.jsx)(n.code,{children:"owner"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"op"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"+o"})}),(0,r.jsx)(n.td,{children:"Moderation, metadata, membership management"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"voice"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"+v"})}),(0,r.jsx)(n.td,{children:"Speak in moderated channels; limited metadata read"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"member"})}),(0,r.jsx)(n.td,{children:"(none)"}),(0,r.jsx)(n.td,{children:"Join, read, post, react, emote (subject to channel rules)"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"The default implied permissions for each role are defined by the default permission tables\nin each extension specification. Explicit RBAC rules ALWAYS take precedence over implied\ndefaults."}),"\n",(0,r.jsx)(n.h2,{id:"custom-roles",children:"Custom Roles"}),"\n",(0,r.jsxs)(n.p,{children:["Roles beyond the built-in set MAY be defined within a scope via ",(0,r.jsx)(n.code,{children:"RBACROLE CREATE"}),". Custom\nroles have no IRC mode equivalent and confer no automatic mode application. They exist\nsolely for RBAC rule targeting."]}),"\n",(0,r.jsx)(n.p,{children:"Custom roles are ordered relative to the built-in roles at creation time. A custom role's\nposition in the precedence order determines which other roles may manage members holding\nit: a user may only assign or remove a role that is lower in precedence than their own."}),"\n",(0,r.jsx)(n.h3,{id:"rbacrole-create",children:"RBACROLE CREATE"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"RBACROLE <scope> CREATE <rolename> AFTER <existing-role>\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Creates a new role within the given scope, inserting it immediately after ",(0,r.jsx)(n.code,{children:"<existing-role>"}),"\nin the precedence order. ",(0,r.jsx)(n.code,{children:"<rolename>"})," MUST match ",(0,r.jsx)(n.code,{children:"[A-Za-z0-9][A-Za-z0-9_-]*"})," and MUST\nNOT conflict with any built-in role name."]}),"\n",(0,r.jsx)(n.h3,{id:"rbacrole-delete",children:"RBACROLE DELETE"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"RBACROLE <scope> DELETE <rolename>\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Deletes a custom role. Any rules targeting this role are also deleted. Any members\nassigned this role (when ",(0,r.jsx)(n.code,{children:"rsr.chat/channel-membership"})," is negotiated) revert to ",(0,r.jsx)(n.code,{children:"member"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"rbacrole-list",children:"RBACROLE LIST"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"RBACROLE <scope> LIST\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Lists all roles (built-in and custom) within the scope, in precedence order. The server\nresponds with one or more ",(0,r.jsx)(n.code,{children:"RPL_RBACROLEENTRY"})," numerics followed by ",(0,r.jsx)(n.code,{children:"RPL_RBACEND"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"scope-targets",children:"Scope Targets"}),"\n",(0,r.jsx)(n.p,{children:"Every rule is attached to a scope target. Scope targets are expressed as follows:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Scope target"}),(0,r.jsx)(n.th,{children:"Syntax"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Server-global"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"*"}),"."]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"*"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Guild"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"guild:<guildname>"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"guild:acmecorp"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Category"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"#<category>/"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"#engineering/"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Guild + Category"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"#<guild>/<category>/"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"#acmecorp/engineering/"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Channel"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"#<channel>"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"#engineering/general"})})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["The trailing slash on category targets is mandatory and distinguishes them from channel\ntargets, consistent with the scoping syntax defined in ",(0,r.jsx)(n.code,{children:"rsr.chat/channel-categories"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Server-global rules apply to all channels on the server. Guild rules apply to all\nchannels within the guild. Category rules apply to all channels whose name begins with\nthe category prefix. Channel rules apply to a single channel only."}),"\n",(0,r.jsx)(n.h2,{id:"scope-chain-and-evaluation-model",children:"Scope Chain and Evaluation Model"}),"\n",(0,r.jsx)(n.p,{children:"When the server evaluates whether a subject holds a given permission in a specific channel,\nit constructs the scope chain for that channel and evaluates rules from most specific to\nmost general, stopping at the first matching rule."}),"\n",(0,r.jsxs)(n.p,{children:["The scope chain for a channel ",(0,r.jsx)(n.code,{children:"#guild/category/leaf"})," when both ",(0,r.jsx)(n.code,{children:"rsr.chat/guild"})," and\n",(0,r.jsx)(n.code,{children:"rsr.chat/channel-categories"})," are negotiated is:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Channel: ",(0,r.jsx)(n.code,{children:"#guild/category/leaf"})]}),"\n",(0,r.jsxs)(n.li,{children:["Guild-scoped category: ",(0,r.jsx)(n.code,{children:"#guild/category/"})]}),"\n",(0,r.jsxs)(n.li,{children:["Category (non-guild): ",(0,r.jsx)(n.code,{children:"#category/"})," (if applicable)"]}),"\n",(0,r.jsxs)(n.li,{children:["Guild: ",(0,r.jsx)(n.code,{children:"guild:<guildname>"})]}),"\n",(0,r.jsxs)(n.li,{children:["Server-global: ",(0,r.jsx)(n.code,{children:"*"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["For a channel ",(0,r.jsx)(n.code,{children:"#category/leaf"})," without guild support:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Channel: ",(0,r.jsx)(n.code,{children:"#category/leaf"})]}),"\n",(0,r.jsxs)(n.li,{children:["Category: ",(0,r.jsx)(n.code,{children:"#category/"})]}),"\n",(0,r.jsxs)(n.li,{children:["Server-global: ",(0,r.jsx)(n.code,{children:"*"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["For a plain channel ",(0,r.jsx)(n.code,{children:"#channel"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Channel: ",(0,r.jsx)(n.code,{children:"#channel"})]}),"\n",(0,r.jsxs)(n.li,{children:["Server-global: ",(0,r.jsx)(n.code,{children:"*"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Within each scope target, rules are evaluated in subject specificity order:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Account-specific rule (",(0,r.jsx)(n.code,{children:"account:<name>"})," or ",(0,r.jsx)(n.code,{children:"did:<did>"}),") \u2014 most specific."]}),"\n",(0,r.jsx)(n.li,{children:"Role-specific rule for the subject's exact role."}),"\n",(0,r.jsxs)(n.li,{children:["Role-specific rule for each role higher in the precedence order than the subject's\nrole, from lowest to highest above them. This provides implicit inheritance: an ",(0,r.jsx)(n.code,{children:"op"}),"\ninherits permissions granted to ",(0,r.jsx)(n.code,{children:"voice"})," and ",(0,r.jsx)(n.code,{children:"member"})," unless explicitly denied."]}),"\n",(0,r.jsxs)(n.li,{children:["Wildcard ",(0,r.jsx)(n.code,{children:"authenticated"})," rule (if subject is identified to an account)."]}),"\n",(0,r.jsxs)(n.li,{children:["Wildcard ",(0,r.jsx)(n.code,{children:"*"})," rule \u2014 least specific."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["The first rule encountered that matches the subject and names the requested permission\ndetermines the outcome. If the rule's effect is ",(0,r.jsx)(n.code,{children:"allow"}),", the permission is granted. If\n",(0,r.jsx)(n.code,{children:"deny"}),", the permission is denied. If no rule matches anywhere in the scope chain, the\nserver falls back to the extension-defined defaults for the subject's role."]}),"\n",(0,r.jsx)(n.h3,{id:"deny-precedence",children:"Deny Precedence"}),"\n",(0,r.jsxs)(n.p,{children:["An explicit ",(0,r.jsx)(n.code,{children:"deny"})," at a more specific scope ALWAYS overrides an ",(0,r.jsx)(n.code,{children:"allow"})," at a less\nspecific scope, consistent with the most-specific-first evaluation order. An explicit\n",(0,r.jsx)(n.code,{children:"allow"})," at a more specific scope ALWAYS overrides a ",(0,r.jsx)(n.code,{children:"deny"})," at a less specific scope.\nThis allows guild-level ",(0,r.jsx)(n.code,{children:"deny"})," rules to be lifted by channel-level ",(0,r.jsx)(n.code,{children:"allow"})," rules and vice\nversa."]}),"\n",(0,r.jsx)(n.h3,{id:"short-circuit-evaluation",children:"Short-circuit Evaluation"}),"\n",(0,r.jsx)(n.p,{children:"Once a matching rule is found at any step of the scope chain, evaluation stops. The\nserver MUST NOT continue evaluating less specific scopes after a match is found, even if\nthose scopes contain conflicting rules."}),"\n",(0,r.jsx)(n.h2,{id:"commands",children:"Commands"}),"\n",(0,r.jsx)(n.h3,{id:"rbacset",children:"RBACSET"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"RBACSET <scope> <subject> <permission> <effect>\n"})}),"\n",(0,r.jsx)(n.p,{children:"Creates or replaces an RBAC rule. If a rule already exists for the given (scope, subject,\npermission) triple it is overwritten."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"<scope>"})," \u2014 a scope target as defined in Scope Targets."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"<subject>"})," \u2014 a role name, ",(0,r.jsx)(n.code,{children:"account:<name>"}),", ",(0,r.jsx)(n.code,{children:"did:<did>"}),", ",(0,r.jsx)(n.code,{children:"authenticated"}),", or ",(0,r.jsx)(n.code,{children:"*"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"<permission>"})," \u2014 a permission identifier, optionally with a wildcard final segment."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"<effect>"})," \u2014 ",(0,r.jsx)(n.code,{children:"allow"})," or ",(0,r.jsx)(n.code,{children:"deny"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["On success the server MUST broadcast an ",(0,r.jsx)(n.code,{children:"RBACSET"})," notification to all active members of\nthe affected scope that have negotiated this capability:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:":setter!user@host RBACSET <scope> <subject> <permission> <effect>\n"})}),"\n",(0,r.jsx)(n.h3,{id:"rbacdel",children:"RBACDEL"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"RBACDEL <scope> <subject> <permission>\n"})}),"\n",(0,r.jsx)(n.p,{children:"Removes an existing RBAC rule. If no matching rule exists the server MUST reply with\nERR_RBACUNKNOWNRULE."}),"\n",(0,r.jsxs)(n.p,{children:["On success the server MUST broadcast an ",(0,r.jsx)(n.code,{children:"RBACDEL"})," notification to all active members of\nthe affected scope that have negotiated this capability:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:":setter!user@host RBACDEL <scope> <subject> <permission>\n"})}),"\n",(0,r.jsx)(n.h3,{id:"rbaclist",children:"RBACLIST"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"RBACLIST <scope>\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Requests all RBAC rules for the given scope target. The server responds with zero or more\nRPL_RBACENTRY numerics followed by RPL_RBACEND. If IRCv3 ",(0,r.jsx)(n.code,{children:"batch"})," is negotiated the\nentire response MUST be wrapped in a ",(0,r.jsx)(n.code,{children:"rsr.chat/rbaclist"})," batch."]}),"\n",(0,r.jsx)(n.h3,{id:"rbaccheck",children:"RBACCHECK"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"RBACCHECK <scope> <subject> <permission>\n"})}),"\n",(0,r.jsx)(n.p,{children:"Performs a dry-run evaluation of whether the given subject holds the given permission in\nthe given scope, following the full scope chain evaluation defined in the Evaluation\nModel. The server responds with RPL_RBACALLOW or RPL_RBACDENY, and MUST include the\nscope target and rule that produced the outcome:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:":server RPL_RBACALLOW <nick> <scope> <subject> <permission> :<matched-scope> <matched-subject> <matched-permission>\n:server RPL_RBACDENY  <nick> <scope> <subject> <permission> :<matched-scope> <matched-subject> <matched-permission>\n"})}),"\n",(0,r.jsxs)(n.p,{children:["If the outcome is determined by the extension default rather than an explicit rule,\n",(0,r.jsx)(n.code,{children:"matched-scope"})," MUST be ",(0,r.jsx)(n.code,{children:"default"})," and ",(0,r.jsx)(n.code,{children:"matched-subject"})," and ",(0,r.jsx)(n.code,{children:"matched-permission"})," MUST\nreflect the built-in defaults."]}),"\n",(0,r.jsx)(n.p,{children:"RBACCHECK is intended for operators and client developers. Servers MAY rate-limit it."}),"\n",(0,r.jsx)(n.h3,{id:"rbacwho",children:"RBACWHO"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"RBACWHO <scope> <permission>\n"})}),"\n",(0,r.jsx)(n.p,{children:"Lists all subjects that have an explicit rule (of either effect) for the given permission\nin the given scope. This does not include subjects that hold the permission by default.\nThe server responds with zero or more RPL_RBACWHOENTRY numerics followed by RPL_RBACEND."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:":server RPL_RBACWHOENTRY <nick> <scope> <permission> <subject> <effect>\n"})}),"\n",(0,r.jsx)(n.h2,{id:"server-numerics",children:"Server Numerics"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Symbolic name"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"RPL_RBACENTRY"})}),(0,r.jsx)(n.td,{children:"A single RBAC rule entry"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"RPL_RBACROLEENTRY"})}),(0,r.jsx)(n.td,{children:"A single role entry in a RBACROLE LIST response"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"RPL_RBACWHOENTRY"})}),(0,r.jsx)(n.td,{children:"A single subject entry in a RBACWHO response"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"RPL_RBACALLOW"})}),(0,r.jsx)(n.td,{children:"RBACCHECK result: permission is granted"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"RPL_RBACDENY"})}),(0,r.jsx)(n.td,{children:"RBACCHECK result: permission is denied"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"RPL_RBACEND"})}),(0,r.jsx)(n.td,{children:"Marks the end of any multi-entry RBAC response"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ERR_RBACNOPERM"})}),(0,r.jsx)(n.td,{children:"The client lacks permission to manage rules in this scope"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ERR_RBACUNKNOWNRULE"})}),(0,r.jsx)(n.td,{children:"The targeted rule does not exist"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ERR_RBACUNKNOWNSCOPE"})}),(0,r.jsx)(n.td,{children:"The specified scope target does not exist"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ERR_RBACUNKNOWNSUBJECT"})}),(0,r.jsx)(n.td,{children:"The specified subject (account or role) does not exist"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ERR_RBACINVALIDPERM"})}),(0,r.jsx)(n.td,{children:"The permission identifier is syntactically invalid"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ERR_RBACRULEFULL"})}),(0,r.jsx)(n.td,{children:"The scope has reached the RBACRULES limit"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ERR_RBACROLEFULL"})}),(0,r.jsx)(n.td,{children:"The scope has reached the maximum custom role limit"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ERR_RBACROLEEXISTS"})}),(0,r.jsx)(n.td,{children:"A role with this name already exists in the scope"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ERR_RBACROLEINVAL"})}),(0,r.jsx)(n.td,{children:"The role name is syntactically invalid or conflicts with a built-in"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"RPL_RBACENTRY has the following format:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:":server RPL_RBACENTRY <nick> <scope> <subject> <permission> <effect> <set-by> <set-at>\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Where ",(0,r.jsx)(n.code,{children:"set-by"})," is the account name of the user who created or last modified the rule and\n",(0,r.jsx)(n.code,{children:"set-at"})," is an ISO 8601 UTC timestamp."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"RPL_RBACROLEENTRY"})," has the following format:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:":server RPL_RBACROLEENTRY <nick> <scope> <rolename> <precedence-index> <type> <created-by> <created-at>\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Where ",(0,r.jsx)(n.code,{children:"type"})," is ",(0,r.jsx)(n.code,{children:"builtin"})," or ",(0,r.jsx)(n.code,{children:"custom"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"who-may-manage-rules",children:"Who May Manage Rules"}),"\n",(0,r.jsx)(n.h3,{id:"channel-rules",children:"Channel rules"}),"\n",(0,r.jsx)(n.p,{children:"A user may manage RBAC rules for a channel if:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["They hold role ",(0,r.jsx)(n.code,{children:"op"})," or higher in that channel, OR"]}),"\n",(0,r.jsx)(n.li,{children:"They are a server operator, OR"}),"\n",(0,r.jsxs)(n.li,{children:["They hold a role for which ",(0,r.jsx)(n.code,{children:"rbac.manage"})," has been explicitly granted via a higher-scope\nrule."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"category-rules",children:"Category rules"}),"\n",(0,r.jsx)(n.p,{children:"A user may manage RBAC rules for a category if:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["They hold role ",(0,r.jsx)(n.code,{children:"admin"})," or higher in all channels within the category, OR"]}),"\n",(0,r.jsx)(n.li,{children:"They are a server operator, OR"}),"\n",(0,r.jsxs)(n.li,{children:["They hold ",(0,r.jsx)(n.code,{children:"rbac.manage"})," for the category scope via a guild or server-global rule."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"guild-rules",children:"Guild rules"}),"\n",(0,r.jsx)(n.p,{children:"A user may manage RBAC rules for a guild if they are a guild operator or a server\noperator."}),"\n",(0,r.jsx)(n.h3,{id:"server-global-rules",children:"Server-global rules"}),"\n",(0,r.jsx)(n.p,{children:"Only server operators may manage server-global RBAC rules."}),"\n",(0,r.jsx)(n.h3,{id:"rule-management-permission",children:"Rule management permission"}),"\n",(0,r.jsx)(n.p,{children:"A user MUST NOT be permitted to grant a permission they do not themselves hold, nor to\ngrant a role higher than their own. A rule that would elevate another user above the\nrule-setter's own effective permissions MUST be rejected with ERR_RBACNOPERM."}),"\n",(0,r.jsx)(n.h2,{id:"consolidated-permission-registry",children:"Consolidated Permission Registry"}),"\n",(0,r.jsx)(n.p,{children:"The following table lists all permission identifiers defined across the extension suite,\ntheir defining extension, and a brief description. This table is informative; the\nnormative definition of each permission's semantics is in the originating extension."}),"\n",(0,r.jsx)(n.h3,{id:"core-channel-permissions",children:"Core channel permissions"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Permission"}),(0,r.jsx)(n.th,{children:"Extension"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"rbac.manage"})}),(0,r.jsx)(n.td,{children:"rsr.chat/rbac"}),(0,r.jsx)(n.td,{children:"Manage RBAC rules in this scope"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"rbac.check"})}),(0,r.jsx)(n.td,{children:"rsr.chat/rbac"}),(0,r.jsx)(n.td,{children:"Use RBACCHECK in this scope"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"rbac.role.manage"})}),(0,r.jsx)(n.td,{children:"rsr.chat/rbac"}),(0,r.jsx)(n.td,{children:"Create and delete custom roles in this scope"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"channel-metadata-permissions",children:"Channel metadata permissions"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Permission"}),(0,r.jsx)(n.th,{children:"Extension"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"chanmeta.get"})}),(0,r.jsx)(n.td,{children:"rsr.chat/channel-metadata"}),(0,r.jsx)(n.td,{children:"Read any metadata key"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"chanmeta.set.<key>"})}),(0,r.jsx)(n.td,{children:"rsr.chat/channel-metadata"}),(0,r.jsx)(n.td,{children:"Set the named key"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"chanmeta.del.<key>"})}),(0,r.jsx)(n.td,{children:"rsr.chat/channel-metadata"}),(0,r.jsx)(n.td,{children:"Delete the named key"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"chanmeta.set.*"})}),(0,r.jsx)(n.td,{children:"rsr.chat/channel-metadata"}),(0,r.jsx)(n.td,{children:"Set any non-reserved metadata key"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"chanmeta.del.*"})}),(0,r.jsx)(n.td,{children:"rsr.chat/channel-metadata"}),(0,r.jsx)(n.td,{children:"Delete any non-reserved metadata key"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"channel-membership-permissions",children:"Channel membership permissions"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Permission"}),(0,r.jsx)(n.th,{children:"Extension"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"membership.list"})}),(0,r.jsx)(n.td,{children:"rsr.chat/channel-membership"}),(0,r.jsx)(n.td,{children:"View the persistent membership list"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"membership.add"})}),(0,r.jsx)(n.td,{children:"rsr.chat/channel-membership"}),(0,r.jsx)(n.td,{children:"Add a new persistent member"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"membership.remove"})}),(0,r.jsx)(n.td,{children:"rsr.chat/channel-membership"}),(0,r.jsx)(n.td,{children:"Remove a persistent member"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"membership.setrole"})}),(0,r.jsx)(n.td,{children:"rsr.chat/channel-membership"}),(0,r.jsx)(n.td,{children:"Change a member's role"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"membership.invite"})}),(0,r.jsx)(n.td,{children:"rsr.chat/channel-membership"}),(0,r.jsx)(n.td,{children:"Issue a one-time session invite"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"membership.self.add"})}),(0,r.jsx)(n.td,{children:"rsr.chat/channel-membership"}),(0,r.jsx)(n.td,{children:"Add oneself to a channel's membership list"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"membership.self.remove"})}),(0,r.jsx)(n.td,{children:"rsr.chat/channel-membership"}),(0,r.jsx)(n.td,{children:"Remove oneself from a channel's membership list"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"reaction-permissions",children:"Reaction permissions"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Permission"}),(0,r.jsx)(n.th,{children:"Extension"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"reaction.add"})}),(0,r.jsx)(n.td,{children:"rsr.chat/reactions"}),(0,r.jsx)(n.td,{children:"Place a reaction on a message"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"reaction.remove.own"})}),(0,r.jsx)(n.td,{children:"rsr.chat/reactions"}),(0,r.jsx)(n.td,{children:"Remove one's own reaction"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"reaction.remove.any"})}),(0,r.jsx)(n.td,{children:"rsr.chat/reactions"}),(0,r.jsx)(n.td,{children:"Remove any user's reaction"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"reaction.list"})}),(0,r.jsx)(n.td,{children:"rsr.chat/reactions"}),(0,r.jsx)(n.td,{children:"Call REACTLIST"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"reaction.configure"})}),(0,r.jsx)(n.td,{children:"rsr.chat/reactions"}),(0,r.jsx)(n.td,{children:"Set the reactions-enabled metadata key"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"reaction.custom"})}),(0,r.jsx)(n.td,{children:"rsr.chat/reactions"}),(0,r.jsx)(n.td,{children:"Place reactions using custom emotes"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"emote-permissions",children:"Emote permissions"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Permission"}),(0,r.jsx)(n.th,{children:"Extension"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"emote.add"})}),(0,r.jsx)(n.td,{children:"rsr.chat/emote"}),(0,r.jsx)(n.td,{children:"Register a new emote in this scope"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"emote.remove"})}),(0,r.jsx)(n.td,{children:"rsr.chat/emote"}),(0,r.jsx)(n.td,{children:"Remove an emote from this scope"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"emote.rename"})}),(0,r.jsx)(n.td,{children:"rsr.chat/emote"}),(0,r.jsx)(n.td,{children:"Rename an emote in this scope"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"emote.list"})}),(0,r.jsx)(n.td,{children:"rsr.chat/emote"}),(0,r.jsx)(n.td,{children:"List emotes in this scope"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"emote.use"})}),(0,r.jsx)(n.td,{children:"rsr.chat/emote"}),(0,r.jsx)(n.td,{children:"Use emotes from this scope in messages"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"emote.use.animated"})}),(0,r.jsx)(n.td,{children:"rsr.chat/emote"}),(0,r.jsx)(n.td,{children:"Use animated emotes from this scope"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"emote.pack.manage"})}),(0,r.jsx)(n.td,{children:"rsr.chat/emote"}),(0,r.jsx)(n.td,{children:"Create, delete, and modify emote packs"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"emote.configure"})}),(0,r.jsx)(n.td,{children:"rsr.chat/emote"}),(0,r.jsx)(n.td,{children:"Set the emotes-enabled metadata key"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"message-link-permissions",children:"Message link permissions"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Permission"}),(0,r.jsx)(n.th,{children:"Extension"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"msglink.resolve"})}),(0,r.jsx)(n.td,{children:"rsr.chat/message-link"}),(0,r.jsx)(n.td,{children:"Have inline references resolved by the server"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"msglink.crosschannel"})}),(0,r.jsx)(n.td,{children:"rsr.chat/message-link"}),(0,r.jsx)(n.td,{children:"Reference messages from other channels"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"typing-notification-permissions",children:"Typing notification permissions"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Permission"}),(0,r.jsx)(n.th,{children:"Extension"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"typing.send"})}),(0,r.jsx)(n.td,{children:"rsr.chat/typing-notify"}),(0,r.jsx)(n.td,{children:"Send typing notifications to this target"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"typing.receive"})}),(0,r.jsx)(n.td,{children:"rsr.chat/typing-notify"}),(0,r.jsx)(n.td,{children:"Receive typing notifications from this target"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"did-authentication-permissions",children:"DID authentication permissions"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Permission"}),(0,r.jsx)(n.th,{children:"Extension"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"did.auth.require"})}),(0,r.jsx)(n.td,{children:"rsr.chat/sasl-did"}),(0,r.jsx)(n.td,{children:"Only DID-authenticated clients may join or post"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"did.auth.method=did:web"})}),(0,r.jsx)(n.td,{children:"rsr.chat/sasl-did"}),(0,r.jsxs)(n.td,{children:["Only did",":web"," clients permitted"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"did.auth.method=did:plc"})}),(0,r.jsx)(n.td,{children:"rsr.chat/sasl-did"}),(0,r.jsxs)(n.td,{children:["Only did",":plc"," clients permitted"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"did.auth.flow=direct"})}),(0,r.jsx)(n.td,{children:"rsr.chat/sasl-did"}),(0,r.jsx)(n.td,{children:"Only direct-flow clients permitted"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"did.auth.flow=delegate"})}),(0,r.jsx)(n.td,{children:"rsr.chat/sasl-did"}),(0,r.jsx)(n.td,{children:"Only delegate-flow clients permitted"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"conflict-resolution-between-scope-levels",children:"Conflict Resolution Between Scope Levels"}),"\n",(0,r.jsx)(n.p,{children:"The scope chain evaluation defined in the Evaluation Model handles the general case.\nTwo specific scenarios warrant additional clarification."}),"\n",(0,r.jsx)(n.h3,{id:"allow-at-channel-overriding-deny-at-category",children:"Allow at channel overriding deny at category"}),"\n",(0,r.jsxs)(n.p,{children:["A guild administrator may set a ",(0,r.jsx)(n.code,{children:"deny"})," rule at the category level while a channel\noperator sets an ",(0,r.jsx)(n.code,{children:"allow"})," rule at the channel level for the same permission. Because\nchannel scope is more specific than category scope and is evaluated first, the\nchannel-level ",(0,r.jsx)(n.code,{children:"allow"})," takes effect for that channel only. This is the intended behaviour\nand requires no special handling."]}),"\n",(0,r.jsx)(n.h3,{id:"deny-at-guild-overriding-allow-at-channel",children:"Deny at guild overriding allow at channel"}),"\n",(0,r.jsxs)(n.p,{children:["A guild operator may set a ",(0,r.jsx)(n.code,{children:"deny"})," rule at the guild level to impose a floor restriction\nacross all guild channels. A channel operator may attempt to override this with an\n",(0,r.jsx)(n.code,{children:"allow"})," at the channel level. Because channel scope is evaluated before guild scope the\nchannel-level ",(0,r.jsx)(n.code,{children:"allow"})," takes effect. If the guild operator wishes their restriction to be\nnon-overridable, they MUST set it at the channel level as well, or they MUST restrict\nthe channel operator's ",(0,r.jsx)(n.code,{children:"rbac.manage"})," permission at the guild or category level so that\nthe channel operator cannot set rules that contradict guild policy."]}),"\n",(0,r.jsx)(n.p,{children:"Servers do not enforce policy hierarchy automatically beyond the scope chain order.\nPolicy enforcement across scopes is the responsibility of administrators configuring\nthe rules."}),"\n",(0,r.jsx)(n.h2,{id:"interaction-with-rsrchatchannel-membership-roles",children:"Interaction with rsr.chat/channel-membership Roles"}),"\n",(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"rsr.chat/channel-membership"})," is negotiated, the roles in ",(0,r.jsx)(n.code,{children:"RBACROLES"})," and\n",(0,r.jsx)(n.code,{children:"MEMBERROLES"})," MUST be identical and in the same order. A member's RBAC role is\ntheir channel membership role. RBAC rules targeting ",(0,r.jsx)(n.code,{children:"op"})," apply to all persistent\nmembers with role ",(0,r.jsx)(n.code,{children:"op"}),". Mode-based roles for transient members (users joined but not\npersistent members) are inferred from their current IRC channel mode in the absence of\na membership record:"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"IRC mode"}),(0,r.jsx)(n.th,{children:"Inferred role"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"+q"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"owner"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"+a"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"admin"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"+o"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"op"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"+v"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"voice"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"(none)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"member"})})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"rsr.chat/channel-membership"})," is not negotiated, role inference from IRC mode is\nalways used."]}),"\n",(0,r.jsx)(n.h2,{id:"interaction-with-rsrchatadvanced-moderation",children:"Interaction with rsr.chat/advanced-moderation"}),"\n",(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"rsr.chat/advanced-moderation"})," is negotiated, RBAC permission checks MAY be used\nas conditions in moderation rules. The following predicates are defined by this extension\nfor use in moderation rule conditions:"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Predicate"}),(0,r.jsx)(n.th,{children:"Matches when"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"rbac:has-perm=<permission>"})}),(0,r.jsx)(n.td,{children:"The acting user holds the named permission"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"rbac:lacks-perm=<permission>"})}),(0,r.jsx)(n.td,{children:"The acting user does not hold the named permission"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"rbac:role=<role>"})}),(0,r.jsx)(n.td,{children:"The acting user holds exactly the named role"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"rbac:role>=<role>"})}),(0,r.jsx)(n.td,{children:"The acting user's role is at least as high as named"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"rbac:role<=<role>"})}),(0,r.jsx)(n.td,{children:"The acting user's role is no higher than named"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"rbac:subject=account:<name>"})}),(0,r.jsx)(n.td,{children:"The acting user is identified as the named account"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"rbac:subject=did:<did>"})}),(0,r.jsx)(n.td,{children:"The acting user is authenticated as the named DID"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"interaction-with-non-negotiating-clients",children:"Interaction with Non-Negotiating Clients"}),"\n",(0,r.jsx)(n.p,{children:"Non-negotiating clients are subject to RBAC rules; the server enforces permission checks\nregardless of whether the client has negotiated the capability. Non-negotiating clients\nsimply do not receive RBAC event notifications and cannot use RBACSET, RBACDEL,\nRBACLIST, RBACCHECK, or RBACWHO. These commands MUST be rejected with\nERR_UNKNOWNCOMMAND for non-negotiating clients."}),"\n",(0,r.jsx)(n.p,{children:"Permission denials experienced by non-negotiating clients are surfaced through standard\nIRC error numerics (ERR_CHANOPRIVSNEEDED, ERR_CANNOTSENDTOCHAN, etc.) as they would be\nin a server without this extension."}),"\n",(0,r.jsx)(n.h2,{id:"guild-integration",children:"Guild Integration"}),"\n",(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"rsr.chat/guild"})," is negotiated, guild operators have implicit ",(0,r.jsx)(n.code,{children:"allow"})," on all\npermissions in all channels within their guild, equivalent to a server-global rule at\nguild scope. Guild operators MAY set RBAC rules at the guild scope for any permission."]}),"\n",(0,r.jsxs)(n.p,{children:["Guild-scope rules are inherited by all channels and categories within the guild via the\nscope chain. A guild operator may create a rule that restricts a permission across the\nentire guild and that cannot be overridden by channel operators unless the guild operator\nexplicitly grants channel operators ",(0,r.jsx)(n.code,{children:"rbac.manage"})," for that permission."]}),"\n",(0,r.jsx)(n.h2,{id:"category-integration",children:"Category Integration"}),"\n",(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"rsr.chat/channel-categories"})," is negotiated, RBACSET, RBACDEL, RBACLIST, and\nRBACCHECK all accept category scope targets using the trailing-slash syntax. Category\nrules are inherited by all channels within the category and are evaluated between the\nchannel scope and the guild or server-global scope in the scope chain."]}),"\n",(0,r.jsx)(n.p,{children:"RBACWHO at a category scope returns subjects with explicit rules in that category only\nand does not aggregate channel-level rules within the category."}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.h3,{id:"setting-a-simple-allow-rule",children:"Setting a simple allow rule"}),"\n",(0,r.jsxs)(n.p,{children:["C: RBACSET #engineering/general voice chanmeta.get allow\nS: ",":alice","!alice@host RBACSET #engineering/general voice chanmeta.get allow\n(broadcast to active members that negotiated the capability)"]}),"\n",(0,r.jsx)(n.h3,{id:"setting-a-category-scoped-deny-rule",children:"Setting a category-scoped deny rule"}),"\n",(0,r.jsxs)(n.p,{children:["C: RBACSET #engineering/ member emote.use.animated deny\nS: ",":alice","!alice@host RBACSET #engineering/ member emote.use.animated deny"]}),"\n",(0,r.jsx)(n.h3,{id:"channel-level-allow-overriding-category-level-deny",children:"Channel-level allow overriding category-level deny"}),"\n",(0,r.jsxs)(n.p,{children:["(member emote.use.animated is denied at #engineering/ category scope)\nC: RBACSET #engineering/design member emote.use.animated allow\nS: ",":alice","!alice@host RBACSET #engineering/design member emote.use.animated allow\n(members in #engineering/design may now use animated emotes despite the category rule)"]}),"\n",(0,r.jsx)(n.h3,{id:"per-account-override",children:"Per-account override"}),"\n",(0,r.jsxs)(n.p,{children:["C: RBACSET #engineering/general account",":carol"," reaction.remove.any allow\nS: ",":alice","!alice@host RBACSET #engineering/general account",":carol"," reaction.remove.any allow\n(carol may remove any user's reaction in #engineering/general regardless of her role)"]}),"\n",(0,r.jsx)(n.h3,{id:"wildcard-permission-grant",children:"Wildcard permission grant"}),"\n",(0,r.jsxs)(n.p,{children:["C: RBACSET #engineering/general op chanmeta.set.* allow\nS: ",":alice","!alice@host RBACSET #engineering/general op chanmeta.set.* allow\n(operators may set any non-reserved metadata key)"]}),"\n",(0,r.jsx)(n.h3,{id:"did-scoped-permission-rule",children:"DID-scoped permission rule"}),"\n",(0,r.jsxs)(n.p,{children:["C: RBACSET guild",":acmecorp"," did:did:web",":alice",".example.com rbac.manage allow\nS: ",":serverop","!serverop@host RBACSET guild",":acmecorp"," did:did:web",":alice",".example.com rbac.manage allow\n(any account authenticated as did:web",":alice",".example.com may manage RBAC in acmecorp)"]}),"\n",(0,r.jsx)(n.h3,{id:"listing-rules-for-a-scope",children:"Listing rules for a scope"}),"\n",(0,r.jsxs)(n.p,{children:["C: RBACLIST #engineering/general\nS: ",":server"," BATCH +rl rsr.chat/rbaclist #engineering/general\nS: @batch=rl ",":server"," RPL_RBACENTRY alice #engineering/general voice chanmeta.get allow serverop 2024-01-10T09:00:00.000Z\nS: @batch=rl ",":server"," RPL_RBACENTRY alice #engineering/general account",":carol"," reaction.remove.any allow alice_acct 2024-03-15T14:22:01.000Z\nS: @batch=rl ",":server"," RPL_RBACENTRY alice #engineering/general op chanmeta.set.* allow alice_acct 2024-03-15T14:25:00.000Z\nS: ",":server"," BATCH -rl\nS: ",":server"," RPL_RBACEND alice #engineering/general ",":End"," of RBAC rules"]}),"\n",(0,r.jsx)(n.h3,{id:"checking-effective-permission",children:"Checking effective permission"}),"\n",(0,r.jsxs)(n.p,{children:["C: RBACCHECK #engineering/general account",":bob"," reaction.add\nS: ",":server"," RPL_RBACALLOW alice #engineering/general account",":bob"," reaction.add :#engineering/ member reaction.add\n(bob holds permission via the member role rule at the category scope)"]}),"\n",(0,r.jsxs)(n.p,{children:["C: RBACCHECK #engineering/general account",":dave"," emote.use.animated\nS: ",":server"," RPL_RBACDENY alice #engineering/general account",":dave"," emote.use.animated :#engineering/ member emote.use.animated\n(dave is denied via the category-scope deny on member)"]}),"\n",(0,r.jsx)(n.h3,{id:"removing-a-rule",children:"Removing a rule"}),"\n",(0,r.jsxs)(n.p,{children:["C: RBACDEL #engineering/general account",":carol"," reaction.remove.any\nS: ",":alice","!alice@host RBACDEL #engineering/general account",":carol"," reaction.remove.any"]}),"\n",(0,r.jsx)(n.h3,{id:"creating-and-using-a-custom-role",children:"Creating and using a custom role"}),"\n",(0,r.jsxs)(n.p,{children:["C: RBACROLE #engineering/ CREATE trusted AFTER voice\n(trusted is now between voice and member in the precedence order)\nC: RBACSET #engineering/ trusted msglink.crosschannel allow\nS: ",":alice","!alice@host RBACSET #engineering/ trusted msglink.crosschannel allow\n(users assigned the trusted role in any #engineering/ channel may post cross-channel links)"]}),"\n",(0,r.jsx)(n.h3,{id:"rbacwho-1",children:"RBACWHO"}),"\n",(0,r.jsxs)(n.p,{children:["C: RBACWHO #engineering/general reaction.remove.any\nS: ",":server"," RPL_RBACWHOENTRY alice #engineering/general reaction.remove.any account",":carol"," allow\nS: ",":server"," RPL_RBACEND alice #engineering/general ",":End"," of RBAC who"]}),"\n",(0,r.jsx)(n.h3,{id:"insufficient-permission-to-set-a-rule",children:"Insufficient permission to set a rule"}),"\n",(0,r.jsxs)(n.p,{children:["(bob has role voice and attempts to grant op-level permissions)\nC: RBACSET #engineering/general member membership.add allow\nS: ",":server"," ERR_RBACNOPERM bob #engineering/general ",":Insufficient"," permission to manage rules in this scope"]}),"\n",(0,r.jsx)(n.h3,{id:"guild-wide-did-requirement",children:"Guild-wide DID requirement"}),"\n",(0,r.jsxs)(n.p,{children:["C: RBACSET guild",":acmecorp"," * did.auth.require allow\n(all unauthenticated users are denied by default; only DID-authenticated users may proceed)\nC: RBACSET guild",":acmecorp"," authenticated did.auth.require allow\n(authenticated but non-DID accounts are separately governed by the did.auth.require permission\nas evaluated by the sasl-did extension)"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453(e,n,i){i.d(n,{R:()=>l,x:()=>d});var s=i(6540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);