<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-proto/extensions/reactions" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">rsr.chat/reactions | RSR.CHAT</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.rsr.chat/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.rsr.chat/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs.rsr.chat/docs/proto/extensions/reactions"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="rsr.chat/reactions | RSR.CHAT"><meta data-rh="true" name="description" content="This specification is still a draft and is subject to change at any time."><meta data-rh="true" property="og:description" content="This specification is still a draft and is subject to change at any time."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.rsr.chat/docs/proto/extensions/reactions"><link data-rh="true" rel="alternate" href="https://docs.rsr.chat/docs/proto/extensions/reactions" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.rsr.chat/docs/proto/extensions/reactions" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"IRCv3 Extensions","item":"https://docs.rsr.chat/docs/proto/extensions/"},{"@type":"ListItem","position":2,"name":"rsr.chat/reactions","item":"https://docs.rsr.chat/docs/proto/extensions/reactions"}]}</script><link rel="stylesheet" href="/assets/css/styles.32a91367.css">
<script src="/assets/js/runtime~main.5795991a.js" defer="defer"></script>
<script src="/assets/js/main.28356972.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">RSR Virtual Chat Protocol</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/proto/intro">Docs</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/rsr-chat" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/proto/intro"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/proto/core-proto"><span title="Core IRCv3 Protocol" class="linkLabel_WmDU">Core IRCv3 Protocol</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/proto/registration"><span title="Accounts and Registration" class="linkLabel_WmDU">Accounts and Registration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/proto/data-ownership"><span title="Content Ownership Model" class="linkLabel_WmDU">Content Ownership Model</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/proto/content-moderation"><span title="Content Moderation" class="linkLabel_WmDU">Content Moderation</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs/proto/extensions/"><span title="IRCv3 Extensions" class="categoryLinkLabel_W154">IRCv3 Extensions</span></a><button aria-label="Collapse sidebar category &#x27;IRCv3 Extensions&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/proto/extensions/advanced-moderation"><span title="rsr.chat/advanced-moderation" class="linkLabel_WmDU">rsr.chat/advanced-moderation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/proto/extensions/channel-categories"><span title="rsr.chat/channel-categories" class="linkLabel_WmDU">rsr.chat/channel-categories</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/proto/extensions/channel-membership"><span title="rsr.chat/channel-membership" class="linkLabel_WmDU">rsr.chat/channel-membership</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/proto/extensions/channel-meta"><span title="rsr.chat/channel-meta" class="linkLabel_WmDU">rsr.chat/channel-meta</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/proto/extensions/channel-pins"><span title="rsr.chat/channel-pins" class="linkLabel_WmDU">rsr.chat/channel-pins</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/proto/extensions/did-sasl"><span title="rsr.chat/did-sasl" class="linkLabel_WmDU">rsr.chat/did-sasl</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/proto/extensions/did-signing"><span title="rsr.chat/did-signing" class="linkLabel_WmDU">rsr.chat/did-signing</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/proto/extensions/emote"><span title="rsr.chat/emote" class="linkLabel_WmDU">rsr.chat/emote</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/proto/extensions/extended-message-length"><span title="rsr.chat/extended-line-length" class="linkLabel_WmDU">rsr.chat/extended-line-length</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/proto/extensions/message-link"><span title="rsr.chat/message-link" class="linkLabel_WmDU">rsr.chat/message-link</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/proto/extensions/modern-ping"><span title="rsr.chat/modern-ping" class="linkLabel_WmDU">rsr.chat/modern-ping</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/proto/extensions/onboarding"><span title="rsr.chat/onboarding" class="linkLabel_WmDU">rsr.chat/onboarding</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/proto/extensions/pending-messages"><span title="rsr.chat/pending-messages" class="linkLabel_WmDU">rsr.chat/pending-messages</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/proto/extensions/rbac"><span title="rsr.chat/rbac" class="linkLabel_WmDU">rsr.chat/rbac</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/proto/extensions/reactions"><span title="rsr.chat/reactions" class="linkLabel_WmDU">rsr.chat/reactions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/proto/extensions/typing-notify"><span title="rsr.chat/typing-notify" class="linkLabel_WmDU">rsr.chat/typing-notify</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/proto/extensions/video"><span title="rsr.chat/video" class="linkLabel_WmDU">rsr.chat/video</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/proto/extensions/voice"><span title="rsr.chat/voice" class="linkLabel_WmDU">rsr.chat/voice</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/proto/lexicons/"><span title="ATProto Lexicons" class="categoryLinkLabel_W154">ATProto Lexicons</span></a><button aria-label="Expand sidebar category &#x27;ATProto Lexicons&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/proto/extensions/"><span>IRCv3 Extensions</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">rsr.chat/reactions</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>This specification is still a <strong>draft</strong> and is subject to change at any time.</p></div></div>
<header><h1>rsr.chat/reactions</h1></header>
<p>This extension allows clients to attach emoji or custom emote reactions to individual
messages identified by their <code>rsr.chat/message-link</code> message ID. Reactions are
aggregated per message per emote by the server and delivered as structured tag
notifications. The full reaction state for a channel is replayable via message history.
Access to reactions may be governed by <code>rsr.chat/rbac</code> and <code>rsr.chat/advanced-moderation</code>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="motivation">Motivation<a href="#motivation" class="hash-link" aria-label="Direct link to Motivation" title="Direct link to Motivation" translate="no">‚Äã</a></h2>
<p>Message reactions are a standard affordance in modern messaging platforms that allow
users to respond to a message without producing a new message in the channel log. Without
a standard mechanism, IRC clients cannot interoperate on reaction state. This extension
defines a server-authoritative, ID-anchored reaction store that integrates cleanly with
the existing message identity and emote systems and degrades gracefully for clients that
have not negotiated the capability.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="capability">Capability<a href="#capability" class="hash-link" aria-label="Direct link to Capability" title="Direct link to Capability" translate="no">‚Äã</a></h2>
<p>This extension is advertised as the <code>rsr.chat/reactions</code> capability during CAP
negotiation:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CAP * LS :rsr.chat/reactions</span><br></span></code></pre></div></div>
<p>No capability value is used. Limits are communicated via ISUPPORT (see below).</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="dependencies">Dependencies<a href="#dependencies" class="hash-link" aria-label="Direct link to Dependencies" title="Direct link to Dependencies" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="rsrchatmessage-link">rsr.chat/message-link<a href="#rsrchatmessage-link" class="hash-link" aria-label="Direct link to rsr.chat/message-link" title="Direct link to rsr.chat/message-link" translate="no">‚Äã</a></h3>
<p>This extension requires that <code>rsr.chat/message-link</code> be negotiated. Reactions are
addressed by the <code>rsr.chat/msgid</code> tag value assigned to each message by that extension.
A reaction cannot be applied to a message that has no resolvable ID. All message ID
semantics, retention, and unresolvability rules defined by <code>rsr.chat/message-link</code> apply
equally to reaction targets.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="rsrchatemote">rsr.chat/emote<a href="#rsrchatemote" class="hash-link" aria-label="Direct link to rsr.chat/emote" title="Direct link to rsr.chat/emote" translate="no">‚Äã</a></h3>
<p>This extension requires that <code>rsr.chat/emote</code> be negotiated. Emote identifiers used in
reactions MUST be valid under the emote specification. Two emote classes are recognised
by this extension:</p>
<ul>
<li class=""><strong>Unicode emoji</strong>: a single Unicode emoji scalar or fully-qualified emoji sequence as
defined by the Unicode Emoji standard. Represented as the literal character sequence,
e.g. <code>üëç</code> or <code>‚ù§Ô∏è</code>.</li>
<li class=""><strong>Custom emote</strong>: a custom emote identifier as defined by <code>rsr.chat/emote</code>, expressed
using that specification&#x27;s identifier syntax, e.g. <code>:blobwave:</code> or
<code>:acmecorp/blobwave:</code>.</li>
</ul>
<p>Servers MUST reject reaction attempts that reference an emote identifier not valid under
<code>rsr.chat/emote</code> with <code>ERR_REACTIONINVALIDEMOTE</code>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="isupport-tokens">ISUPPORT Tokens<a href="#isupport-tokens" class="hash-link" aria-label="Direct link to ISUPPORT Tokens" title="Direct link to ISUPPORT Tokens" translate="no">‚Äã</a></h2>
<p>Servers MUST advertise the following tokens in <code>RPL_ISUPPORT</code> (005) when this capability
is active:</p>
<ul>
<li class=""><code>REACTIONMAX=&lt;n&gt;</code> ‚Äî the maximum number of distinct emotes that may be reacted to a
single message. A value of <code>0</code> indicates no server-imposed limit.</li>
<li class=""><code>REACTIONUSERMAX=&lt;n&gt;</code> ‚Äî the maximum number of users whose reactions are tracked per
emote per message. A value of <code>0</code> indicates no limit. When this limit is reached the
server MUST continue to accept reactions but MAY stop tracking individual reactor
identities for that emote, incrementing only the aggregate count.</li>
</ul>
<p>Example:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    :server 005 nick REACTIONMAX=20 REACTIONUSERMAX=100 :are supported by this server</span><br></span></code></pre></div></div>
<p>If any of these values change after a configuration reload, a fresh <code>RPL_ISUPPORT</code> MUST be
sent to all connected clients.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="terminology">Terminology<a href="#terminology" class="hash-link" aria-label="Direct link to Terminology" title="Direct link to Terminology" translate="no">‚Äã</a></h2>
<ul>
<li class=""><strong>Reaction</strong>: an association between a message ID, an emote, and the account or nick of
the user who placed it.</li>
<li class=""><strong>Aggregate</strong>: the server-maintained count of distinct users who have placed a given
emote on a given message.</li>
<li class=""><strong>Reactor</strong>: a user who has placed a reaction.</li>
<li class=""><strong>Toggle semantics</strong>: placing a reaction that the user has already placed removes it;
placing one they have not placed adds it.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-react-command">The REACT Command<a href="#the-react-command" class="hash-link" aria-label="Direct link to The REACT Command" title="Direct link to The REACT Command" translate="no">‚Äã</a></h2>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    REACT &lt;msgid&gt; &lt;emote&gt;</span><br></span></code></pre></div></div>
<p>Places or removes a reaction on the message identified by <code>&lt;msgid&gt;</code>. Reactions follow
toggle semantics: if the calling user has already placed <code>&lt;emote&gt;</code> on this message, the
reaction is removed; otherwise it is added.</p>
<p><code>&lt;msgid&gt;</code> MUST be a valid message ID of exactly <code>MSGIDLEN</code> characters as defined by
<code>rsr.chat/message-link</code>. The server MUST resolve the target message before accepting the
reaction. If the message ID cannot be resolved the server MUST reply with
<code>ERR_REACTIONUNKNOWNMSG</code>.</p>
<p><code>&lt;emote&gt;</code> MUST be a valid emote identifier under <code>rsr.chat/emote</code>. The server MUST
validate the emote before accepting the reaction. If the emote is not valid the server
MUST reply with <code>ERR_REACTIONINVALIDEMOTE</code>.</p>
<p>On success the server MUST broadcast a <code>REACT</code> notification to all members of the
channel or conversation in which the target message resides that have negotiated this
capability:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">:alice!alice@host REACT &lt;msgid&gt; &lt;emote&gt; &lt;action&gt; &lt;count&gt;</span><br></span></code></pre></div></div>
<p>Where:</p>
<ul>
<li class=""><code>&lt;action&gt;</code> is <code>add</code> if the reaction was placed or <code>remove</code> if it was withdrawn.</li>
<li class=""><code>&lt;count&gt;</code> is the updated aggregate count of users who have placed <code>&lt;emote&gt;</code> on this
message after applying this change.</li>
</ul>
<p>Non-negotiating clients receive no notification.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-reactlist-command">The REACTLIST Command<a href="#the-reactlist-command" class="hash-link" aria-label="Direct link to The REACTLIST Command" title="Direct link to The REACTLIST Command" translate="no">‚Äã</a></h2>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">REACTLIST &lt;msgid&gt;</span><br></span></code></pre></div></div>
<p>Requests the full reaction state for the message identified by <code>&lt;msgid&gt;</code>. The server
responds with zero or more <code>RPL_REACTENTRY</code> numerics followed by <code>RPL_REACTEND</code>. If IRCv3
<code>batch</code> is negotiated the entire response MUST be wrapped in a <code>rsr.chat/reactlist</code> batch.</p>
<p><code>REACTLIST</code> may be issued by any client that is currently joined to the channel containing
the target message, or that holds persistent membership in it (see Channel Membership
Integration). Clients that lack visibility of the target channel MUST receive
<code>ERR_REACTIONUNKNOWNMSG</code> as if the message did not exist.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="server-numerics">Server Numerics<a href="#server-numerics" class="hash-link" aria-label="Direct link to Server Numerics" title="Direct link to Server Numerics" translate="no">‚Äã</a></h2>
<table><thead><tr><th>Symbolic name</th><th>Description</th></tr></thead><tbody><tr><td><code>RPL_REACTENTRY</code></td><td>A single emote aggregate entry for a message</td></tr><tr><td><code>RPL_REACTEND</code></td><td>Marks the end of a REACTLIST response</td></tr><tr><td><code>ERR_REACTIONUNKNOWNMSG</code></td><td>The target message ID could not be resolved</td></tr><tr><td><code>ERR_REACTIONINVALIDEMOTE</code></td><td>The emote identifier is not valid under rsr.chat/emote</td></tr><tr><td><code>ERR_REACTIONFULL</code></td><td>The message has reached the REACTIONMAX distinct-emote limit</td></tr><tr><td><code>ERR_REACTIONNOPERM</code></td><td>The client lacks permission to react in this context</td></tr></tbody></table>
<p><code>RPL_REACTENTRY</code> has the following format:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">:server RPL_REACTENTRY &lt;nick&gt; &lt;msgid&gt; &lt;emote&gt; &lt;count&gt; :&lt;reactors&gt;</span><br></span></code></pre></div></div>
<p>Where:</p>
<ul>
<li class=""><code>&lt;emote&gt;</code> is the emote identifier.</li>
<li class=""><code>&lt;count&gt;</code> is the total number of users who have placed this reaction.</li>
<li class=""><code>&lt;reactors&gt;</code> is a space-separated list of account names or nicks of up to
<code>REACTIONUSERMAX</code> users who have placed this reaction. If <code>REACTIONUSERMAX</code> has been
exceeded for this emote the list MUST be truncated and the server MUST append the
token <code>+more</code> as the final element to signal that the list is incomplete.</li>
</ul>
<p><code>RPL_REACTEND</code> has the following format:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">:server RPL_REACTEND &lt;nick&gt; &lt;msgid&gt; :End of reactions</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="reaction-state-in-message-tags">Reaction State in Message Tags<a href="#reaction-state-in-message-tags" class="hash-link" aria-label="Direct link to Reaction State in Message Tags" title="Direct link to Reaction State in Message Tags" translate="no">‚Äã</a></h2>
<p>When a message is delivered to a negotiating client and that message already has one or
more reactions attached (e.g. during history replay), the server MUST include a
<code>reaction-summary</code> tag on the message. The tag value is a
pipe-delimited list of <code>&lt;emote&gt;:&lt;count&gt;</code> pairs, one per distinct emote that has at
least one reaction, ordered by descending count:</p>
<p>rsr.chat/reaction-summary=üëç:12|‚ù§Ô∏è:7|:blobwave::3</p>
<p>This allows clients to render reaction counts inline with messages without requiring a
separate REACTLIST round-trip on initial load.</p>
<p>If a message has no reactions, the <code>reaction-summary</code> tag MUST be omitted.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="reaction-storage-and-retention">Reaction Storage and Retention<a href="#reaction-storage-and-retention" class="hash-link" aria-label="Direct link to Reaction Storage and Retention" title="Direct link to Reaction Storage and Retention" translate="no">‚Äã</a></h2>
<p>Reactions MUST be stored persistently by the server for as long as the referenced message
is within the channel&#x27;s history retention window. When a message expires from history,
all reactions attached to it MUST also be discarded.</p>
<p>Reactions MUST NOT be stored for messages that are not within the history retention window
at the time the reaction is placed. If a client attempts to react to a message whose ID
is valid in format but is no longer in the retention window, the server MUST reply with
<code>ERR_REACTIONUNKNOWNMSG</code>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="message-history-integration">Message History Integration<a href="#message-history-integration" class="hash-link" aria-label="Direct link to Message History Integration" title="Direct link to Message History Integration" translate="no">‚Äã</a></h2>
<p>When a client requests message history via <code>CHATHISTORY</code> or an equivalent mechanism,
relayed messages MUST include the <code>reaction-summary</code> tag reflecting the reaction
state at the time of the history request, not the state at original delivery time.
Reaction counts are live aggregates and their value in history replies MUST be current.</p>
<p>Reaction add and remove events themselves MUST NOT appear as entries in the <code>CHATHISTORY</code>
message log. They are metadata about messages, not messages in their own right.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="default-permissions">Default Permissions<a href="#default-permissions" class="hash-link" aria-label="Direct link to Default Permissions" title="Direct link to Default Permissions" translate="no">‚Äã</a></h2>
<p>Unless overridden by <code>rsr.chat/rbac</code> or <code>rsr.chat/advanced-moderation</code>, the following
default permission rules apply:</p>
<ul>
<li class="">Any client currently joined to a channel MAY use REACT and REACTLIST for messages in
that channel.</li>
<li class="">Persistent members who are not currently active (offline) MAY use REACTLIST but MUST
NOT use REACT.</li>
<li class="">Removing another user&#x27;s reaction is not permitted under any default permission. Only
server operators and, when <code>rsr.chat/rbac</code> is negotiated, users with the
<code>reaction.remove.any</code> permission MAY do so.</li>
<li class="">Server operators MAY use REACT and REACTLIST on any channel.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="guild-and-category-integration">Guild and Category Integration<a href="#guild-and-category-integration" class="hash-link" aria-label="Direct link to Guild and Category Integration" title="Direct link to Guild and Category Integration" translate="no">‚Äã</a></h2>
<p>When <code>rsr.chat/guild</code> or <code>rsr.chat/channel-categories</code> are negotiated, reaction
visibility follows normal channel membership boundaries. There is no guild-wide or
category-scoped reaction feed; reactions are scoped to the individual channel containing
the target message.</p>
<p>When <code>rsr.chat/channel-categories</code> is negotiated, RBAC rules for reaction permissions
MAY be scoped to a category or guild prefix using the scope syntax defined by that
specification. See RBAC Integration.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="channel-metadata-integration">Channel Metadata Integration<a href="#channel-metadata-integration" class="hash-link" aria-label="Direct link to Channel Metadata Integration" title="Direct link to Channel Metadata Integration" translate="no">‚Äã</a></h2>
<p>When <code>rsr.chat/channel-metadata</code> is negotiated, the following key exists implicitly on
every channel and cannot be deleted:</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="reactions-enabled"><code>reactions-enabled</code><a href="#reactions-enabled" class="hash-link" aria-label="Direct link to reactions-enabled" title="Direct link to reactions-enabled" translate="no">‚Äã</a></h3>
<p>Type: <code>bool</code>. When <code>false</code>, no reactions may be placed on messages in this channel. REACT
commands targeting this channel MUST be rejected with ERR_REACTIONNOPERM. Default: <code>true</code>.</p>
<p>This key may be set by channel operators or by users with the <code>reaction.configure</code> RBAC
permission. It is not read-only and may be set via CHANMETA SET.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="channel-membership-integration">Channel Membership Integration<a href="#channel-membership-integration" class="hash-link" aria-label="Direct link to Channel Membership Integration" title="Direct link to Channel Membership Integration" translate="no">‚Äã</a></h2>
<p>When <code>rsr.chat/channel-membership</code> is negotiated, persistent members who are not
currently active (offline) MAY call REACTLIST to inspect reaction state for channels in
which they hold membership. This is consistent with the offline CHATHISTORY access
defined by <code>rsr.chat/channel-membership</code>.</p>
<p>Offline persistent members MUST NOT be permitted to place or remove reactions via REACT.
Reactions imply active presence. If an offline member attempts REACT the server MUST
reply with ERR_REACTIONNOPERM.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="rbac-integration">RBAC Integration<a href="#rbac-integration" class="hash-link" aria-label="Direct link to RBAC Integration" title="Direct link to RBAC Integration" translate="no">‚Äã</a></h2>
<p>When <code>rsr.chat/rbac</code> is negotiated, the following permission identifiers are defined by
this extension:</p>
<table><thead><tr><th>Permission identifier</th><th>Description</th></tr></thead><tbody><tr><td><code>reaction.add</code></td><td>Place a reaction on a message</td></tr><tr><td><code>reaction.remove.own</code></td><td>Remove one&#x27;s own reaction from a message</td></tr><tr><td><code>reaction.remove.any</code></td><td>Remove any user&#x27;s reaction from a message</td></tr><tr><td><code>reaction.list</code></td><td>Call REACTLIST for messages in this channel</td></tr><tr><td><code>reaction.configure</code></td><td>Set the <code>reactions-enabled</code> channel metadata key</td></tr><tr><td><code>reaction.custom</code></td><td>Place reactions using custom emotes (not Unicode emoji)</td></tr></tbody></table>
<p>Servers MUST reject REACT from clients that lack <code>reaction.add</code> for the target channel
with ERR_REACTIONNOPERM.</p>
<p>Servers MUST reject removal of another user&#x27;s reaction from a client that lacks
<code>reaction.remove.any</code> with ERR_REACTIONNOPERM.</p>
<p>Servers MAY restrict custom emote reactions to clients that hold <code>reaction.custom</code>. If a
client without <code>reaction.custom</code> attempts to place a custom emote reaction the server
MUST reply with ERR_REACTIONNOPERM.</p>
<p>RBAC rules for reaction permissions MAY be scoped to a channel category or guild prefix
using the scope syntax defined by <code>rsr.chat/channel-categories</code>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="advanced-moderation-integration">Advanced Moderation Integration<a href="#advanced-moderation-integration" class="hash-link" aria-label="Direct link to Advanced Moderation Integration" title="Direct link to Advanced Moderation Integration" translate="no">‚Äã</a></h2>
<p>When <code>rsr.chat/advanced-moderation</code> is negotiated, the following predicates are defined
for use in moderation rule conditions (normative syntax defined by that specification):</p>
<table><thead><tr><th>Predicate</th><th>Matches when</th></tr></thead><tbody><tr><td><code>reaction:has-reactions</code></td><td>The target message has at least one reaction</td></tr><tr><td><code>reaction:count&gt;=&lt;n&gt;</code></td><td>The total reaction count across all emotes is &gt;= n</td></tr><tr><td><code>reaction:emote=&lt;emote&gt;</code></td><td>The specified emote has at least one reaction</td></tr><tr><td><code>reaction:emote-count&gt;=&lt;n&gt;</code></td><td>The number of distinct emotes with reactions is &gt;= n</td></tr><tr><td><code>reaction:is-custom</code></td><td>The emote being placed is a custom emote</td></tr><tr><td><code>reaction:reactor=&lt;account&gt;</code></td><td>The specified account has reacted to this message</td></tr></tbody></table>
<p>These predicates may be used to enforce policies such as disabling custom emote reactions
in certain channels, alerting on messages that accumulate a large number of reactions, or
restricting reaction-heavy threads.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="interaction-with-non-negotiating-clients">Interaction with Non-Negotiating Clients<a href="#interaction-with-non-negotiating-clients" class="hash-link" aria-label="Direct link to Interaction with Non-Negotiating Clients" title="Direct link to Interaction with Non-Negotiating Clients" translate="no">‚Äã</a></h2>
<p>Non-negotiating clients receive no REACT notifications and cannot issue REACT or
REACTLIST commands. REACT and REACTLIST sent by non-negotiating clients MUST be rejected
with ERR_UNKNOWNCOMMAND. Reaction state is entirely invisible to non-negotiating clients.
Messages delivered to non-negotiating clients MUST NOT include the
<code>rsr.chat/reaction-summary</code> tag.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="capability-negotiation">Capability negotiation<a href="#capability-negotiation" class="hash-link" aria-label="Direct link to Capability negotiation" title="Direct link to Capability negotiation" translate="no">‚Äã</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">C: CAP LS 302</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: CAP * LS :rsr.chat/reactions rsr.chat/message-link rsr.chat/emote</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C: CAP REQ :rsr.chat/reactions rsr.chat/message-link rsr.chat/emote</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: CAP * ACK :rsr.chat/reactions rsr.chat/message-link rsr.chat/emote</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C: NICK alice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C: USER alice 0 * :Alice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: 005 alice REACTIONMAX=20 REACTIONUSERMAX=100 REACTIONSELF=1 MSGLINKMAX=5 MSGIDLEN=26 :are supported by this server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: 001 alice :Welcome to the network</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="placing-a-reaction">Placing a reaction<a href="#placing-a-reaction" class="hash-link" aria-label="Direct link to Placing a reaction" title="Direct link to Placing a reaction" translate="no">‚Äã</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(bob sent a message that alice received as:)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@MSGID=01HQ7K2N4R8VXJD3MCWBPZT56Y :bob!bob@host PRIVMSG #engineering/general :The deploy is fixed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C: REACT 01HQ7K2N4R8VXJD3MCWBPZT56Y üëç</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: (broadcast to all negotiating channel members:)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:alice!alice@host REACT 01HQ7K2N4R8VXJD3MCWBPZT56Y üëç add 1</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="a-second-user-reacts-with-the-same-emote">A second user reacts with the same emote<a href="#a-second-user-reacts-with-the-same-emote" class="hash-link" aria-label="Direct link to A second user reacts with the same emote" title="Direct link to A second user reacts with the same emote" translate="no">‚Äã</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">:carol!carol@host REACT 01HQ7K2N4R8VXJD3MCWBPZT56Y üëç add 2</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="removing-a-reaction-via-toggle">Removing a reaction via toggle<a href="#removing-a-reaction-via-toggle" class="hash-link" aria-label="Direct link to Removing a reaction via toggle" title="Direct link to Removing a reaction via toggle" translate="no">‚Äã</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    C: REACT 01HQ7K2N4R8VXJD3MCWBPZT56Y üëç</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    S: :alice!alice@host REACT 01HQ7K2N4R8VXJD3MCWBPZT56Y üëç remove 1</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="using-a-custom-emote">Using a custom emote<a href="#using-a-custom-emote" class="hash-link" aria-label="Direct link to Using a custom emote" title="Direct link to Using a custom emote" translate="no">‚Äã</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">C: REACT 01HQ7K2N4R8VXJD3MCWBPZT56Y :blobwave:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: :alice!alice@host REACT 01HQ7K2N4R8VXJD3MCWBPZT56Y :blobwave: add 1</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="reactlist-with-batch">REACTLIST with batch<a href="#reactlist-with-batch" class="hash-link" aria-label="Direct link to REACTLIST with batch" title="Direct link to REACTLIST with batch" translate="no">‚Äã</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">C: REACTLIST 01HQ7K2N4R8VXJD3MCWBPZT56Y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: :server BATCH +rl rsr.chat/reactlist 01HQ7K2N4R8VXJD3MCWBPZT56Y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: @batch=rl :server RPL_REACTENTRY alice 01HQ7K2N4R8VXJD3MCWBPZT56Y üëç 2 :carol_acct alice_acct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: @batch=rl :server RPL_REACTENTRY alice 01HQ7K2N4R8VXJD3MCWBPZT56Y :blobwave: 1 :alice_acct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: :server BATCH -rl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: :server RPL_REACTEND alice 01HQ7K2N4R8VXJD3MCWBPZT56Y :End of reactions</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="history-replay-with-reaction-summary-tag">History replay with reaction summary tag<a href="#history-replay-with-reaction-summary-tag" class="hash-link" aria-label="Direct link to History replay with reaction summary tag" title="Direct link to History replay with reaction summary tag" translate="no">‚Äã</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(client requests history for #engineering/general)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: :server BATCH +hist chathistory #engineering/general</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: @batch=hist;rsr.chat/msgid=01HQ7K2N4R8VXJD3MCWBPZT56Y;rsr.chat/reaction-summary=üëç:2|:blobwave::1 :bob!bob@host PRIVMSG #engineering/general :The deploy is fixed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: :server BATCH -hist</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="unresolvable-message-id">Unresolvable message ID<a href="#unresolvable-message-id" class="hash-link" aria-label="Direct link to Unresolvable message ID" title="Direct link to Unresolvable message ID" translate="no">‚Äã</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">C: REACT 01HQXXXXXXXXXXXXXXXXXXXXXXXX üëç</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: :server ERR_REACTIONUNKNOWNMSG alice :Message ID could not be resolved</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="reactions-disabled-on-channel">Reactions disabled on channel<a href="#reactions-disabled-on-channel" class="hash-link" aria-label="Direct link to Reactions disabled on channel" title="Direct link to Reactions disabled on channel" translate="no">‚Äã</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(reactions-enabled metadata key is false for #announcements)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C: REACT 01HQ7K2N4R8VXJD3MCWBPZT56Y üëç</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: :server ERR_REACTIONNOPERM alice #announcements :Reactions are disabled in this channel</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="reactionmax-exceeded">REACTIONMAX exceeded<a href="#reactionmax-exceeded" class="hash-link" aria-label="Direct link to REACTIONMAX exceeded" title="Direct link to REACTIONMAX exceeded" translate="no">‚Äã</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(message already has 20 distinct emotes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C: REACT 01HQ7K2N4R8VXJD3MCWBPZT56Y üéâ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: :server ERR_REACTIONFULL alice 01HQ7K2N4R8VXJD3MCWBPZT56Y :Reaction emote limit reached</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="reactionusermax-exceeded-truncated-reactor-list">REACTIONUSERMAX exceeded; truncated reactor list<a href="#reactionusermax-exceeded-truncated-reactor-list" class="hash-link" aria-label="Direct link to REACTIONUSERMAX exceeded; truncated reactor list" title="Direct link to REACTIONUSERMAX exceeded; truncated reactor list" translate="no">‚Äã</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(101 users have reacted with üëç and REACTIONUSERMAX=100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C: REACTLIST 01HQ7K2N4R8VXJD3MCWBPZT56Y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: @batch=rl :server RPL_REACTENTRY alice 01HQ7K2N4R8VXJD3MCWBPZT56Y üëç 101 :user1_acct user2_acct ... user100_acct +more</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="self-reaction-rejected">Self-reaction rejected<a href="#self-reaction-rejected" class="hash-link" aria-label="Direct link to Self-reaction rejected" title="Direct link to Self-reaction rejected" translate="no">‚Äã</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(REACTIONSELF is absent from ISUPPORT; alice tries to react to her own message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C: REACT 01HQAB3T2F7PPXC4NK8RWLM09S üëç</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: :server ERR_REACTIONSELF alice :Self-reactions are not permitted on this server</span><br></span></code></pre></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/proto/extensions/rbac"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">rsr.chat/rbac</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/proto/extensions/typing-notify"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">rsr.chat/typing-notify</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#motivation" class="table-of-contents__link toc-highlight">Motivation</a></li><li><a href="#capability" class="table-of-contents__link toc-highlight">Capability</a></li><li><a href="#dependencies" class="table-of-contents__link toc-highlight">Dependencies</a><ul><li><a href="#rsrchatmessage-link" class="table-of-contents__link toc-highlight">rsr.chat/message-link</a></li><li><a href="#rsrchatemote" class="table-of-contents__link toc-highlight">rsr.chat/emote</a></li></ul></li><li><a href="#isupport-tokens" class="table-of-contents__link toc-highlight">ISUPPORT Tokens</a></li><li><a href="#terminology" class="table-of-contents__link toc-highlight">Terminology</a></li><li><a href="#the-react-command" class="table-of-contents__link toc-highlight">The REACT Command</a></li><li><a href="#the-reactlist-command" class="table-of-contents__link toc-highlight">The REACTLIST Command</a></li><li><a href="#server-numerics" class="table-of-contents__link toc-highlight">Server Numerics</a></li><li><a href="#reaction-state-in-message-tags" class="table-of-contents__link toc-highlight">Reaction State in Message Tags</a></li><li><a href="#reaction-storage-and-retention" class="table-of-contents__link toc-highlight">Reaction Storage and Retention</a></li><li><a href="#message-history-integration" class="table-of-contents__link toc-highlight">Message History Integration</a></li><li><a href="#default-permissions" class="table-of-contents__link toc-highlight">Default Permissions</a></li><li><a href="#guild-and-category-integration" class="table-of-contents__link toc-highlight">Guild and Category Integration</a></li><li><a href="#channel-metadata-integration" class="table-of-contents__link toc-highlight">Channel Metadata Integration</a><ul><li><a href="#reactions-enabled" class="table-of-contents__link toc-highlight"><code>reactions-enabled</code></a></li></ul></li><li><a href="#channel-membership-integration" class="table-of-contents__link toc-highlight">Channel Membership Integration</a></li><li><a href="#rbac-integration" class="table-of-contents__link toc-highlight">RBAC Integration</a></li><li><a href="#advanced-moderation-integration" class="table-of-contents__link toc-highlight">Advanced Moderation Integration</a></li><li><a href="#interaction-with-non-negotiating-clients" class="table-of-contents__link toc-highlight">Interaction with Non-Negotiating Clients</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a><ul><li><a href="#capability-negotiation" class="table-of-contents__link toc-highlight">Capability negotiation</a></li><li><a href="#placing-a-reaction" class="table-of-contents__link toc-highlight">Placing a reaction</a></li><li><a href="#a-second-user-reacts-with-the-same-emote" class="table-of-contents__link toc-highlight">A second user reacts with the same emote</a></li><li><a href="#removing-a-reaction-via-toggle" class="table-of-contents__link toc-highlight">Removing a reaction via toggle</a></li><li><a href="#using-a-custom-emote" class="table-of-contents__link toc-highlight">Using a custom emote</a></li><li><a href="#reactlist-with-batch" class="table-of-contents__link toc-highlight">REACTLIST with batch</a></li><li><a href="#history-replay-with-reaction-summary-tag" class="table-of-contents__link toc-highlight">History replay with reaction summary tag</a></li><li><a href="#unresolvable-message-id" class="table-of-contents__link toc-highlight">Unresolvable message ID</a></li><li><a href="#reactions-disabled-on-channel" class="table-of-contents__link toc-highlight">Reactions disabled on channel</a></li><li><a href="#reactionmax-exceeded" class="table-of-contents__link toc-highlight">REACTIONMAX exceeded</a></li><li><a href="#reactionusermax-exceeded-truncated-reactor-list" class="table-of-contents__link toc-highlight">REACTIONUSERMAX exceeded; truncated reactor list</a></li><li><a href="#self-reaction-rejected" class="table-of-contents__link toc-highlight">Self-reaction rejected</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.rsr.chat" target="_blank" rel="noopener noreferrer" class="footer__link-item">TODO</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://bsky.app/profile/rsr.chat" target="_blank" rel="noopener noreferrer" class="footer__link-item">BlueSky<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2025-2026 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>