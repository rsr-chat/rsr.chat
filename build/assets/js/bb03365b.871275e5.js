"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[950],{6390(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"proto/extensions/channel-categories","title":"rsr.chat/channel-categories","description":"This specification is still a draft and is subject to change at any time.","source":"@site/docs/proto/1500_extensions/channel-categories.md","sourceDirName":"proto/1500_extensions","slug":"/proto/extensions/channel-categories","permalink":"/docs/proto/extensions/channel-categories","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"rsr.chat/channel-categories"},"sidebar":"protoSidebar","previous":{"title":"rsr.chat/advanced-moderation","permalink":"/docs/proto/extensions/advanced-moderation"},"next":{"title":"rsr.chat/channel-membership","permalink":"/docs/proto/extensions/channel-membership"}}');var t=i(4848),r=i(8453);const s={title:"rsr.chat/channel-categories"},c="rsr.chat/channel-categories",l={},d=[{value:"Motivation",id:"motivation",level:2},{value:"Capability",id:"capability",level:2},{value:"Terminology",id:"terminology",level:2},{value:"Channel Name Syntax",id:"channel-name-syntax",level:2},{value:"ISUPPORT Token",id:"isupport-token",level:2},{value:"Category Semantics",id:"category-semantics",level:2},{value:"Client Behaviour",id:"client-behaviour",level:2},{value:"Example: non-negotiating client joins an existing hierarchical channel",id:"example-non-negotiating-client-joins-an-existing-hierarchical-channel",level:3},{value:"Example: non-negotiating client attempts to create a new hierarchical channel",id:"example-non-negotiating-client-attempts-to-create-a-new-hierarchical-channel",level:3},{value:"Server Behaviour",id:"server-behaviour",level:2},{value:"Guild Integration",id:"guild-integration",level:2},{value:"RBAC and Advanced Moderation Scoping",id:"rbac-and-advanced-moderation-scoping",level:2},{value:"Examples",id:"examples",level:2},{value:"Negotiation and joining a categorised channel",id:"negotiation-and-joining-a-categorised-channel",level:3},{value:"Depth limit exceeded",id:"depth-limit-exceeded",level:3},{value:"Guild-level naming with rsr.chat/guild negotiated",id:"guild-level-naming-with-rsrchatguild-negotiated",level:3}];function o(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["This specification is still a ",(0,t.jsx)(n.strong,{children:"draft"})," and is subject to change at any time."]})}),"\n",(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"rsrchatchannel-categories",children:"rsr.chat/channel-categories"})}),"\n",(0,t.jsxs)(n.p,{children:["This extension allows IRC channels to be assigned hierarchical categories by embedding\nforward-slash delimiters in the channel name. It provides structured namespace organisation\nfor servers that host many channels, and integrates with the ",(0,t.jsx)(n.code,{children:"rsr.chat/guild"}),",\n",(0,t.jsx)(n.code,{children:"rsr.chat/rbac"}),", and ",(0,t.jsx)(n.code,{children:"rsr.chat/advanced-moderation"})," capabilities for scoped access control\nand moderation."]}),"\n",(0,t.jsx)(n.h2,{id:"motivation",children:"Motivation"}),"\n",(0,t.jsxs)(n.p,{children:["Flat channel namespaces become difficult to navigate as server populations grow. Conventions\nlike ",(0,t.jsx)(n.code,{children:"#project-general"})," and ",(0,t.jsx)(n.code,{children:"#project-dev"})," exist only by social agreement and are not\nmachine-readable. This extension formalises a hierarchical naming scheme that clients and\nservers can use to group, display, and govern channels structurally."]}),"\n",(0,t.jsx)(n.h2,{id:"capability",children:"Capability"}),"\n",(0,t.jsxs)(n.p,{children:["This extension is advertised as the ",(0,t.jsx)(n.code,{children:"rsr.chat/channel-categories"})," capability during CAP\nnegotiation:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"CAP * LS :rsr.chat/channel-categories\n"})}),"\n",(0,t.jsx)(n.p,{children:"No capability value is used. The maximum permitted depth is communicated via ISUPPORT\n(see below)."}),"\n",(0,t.jsx)(n.h2,{id:"terminology",children:"Terminology"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Segment"}),": a single slash-delimited component of a channel name."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Category"}),": any segment that is not the final (leaf) segment."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Leaf channel"}),": the final segment; the actual joinable channel."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Depth"}),": the total number of segments in a channel name. A plain channel such as\n",(0,t.jsx)(n.code,{children:"#general"})," has depth 1. ",(0,t.jsx)(n.code,{children:"#engineering/general"})," has depth 2."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Guild prefix"}),": when ",(0,t.jsx)(n.code,{children:"rsr.chat/guild"})," is negotiated, the outermost segment is\ninterpreted as a guild identifier rather than a category (see Guild Integration)."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"channel-name-syntax",children:"Channel Name Syntax"}),"\n",(0,t.jsxs)(n.p,{children:["When this capability is in effect, channel names MAY contain forward-slash (",(0,t.jsx)(n.code,{children:"/"}),") characters\nas segment delimiters. The following rules apply:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The channel sigil (",(0,t.jsx)(n.code,{children:"#"}),", ",(0,t.jsx)(n.code,{children:"&"}),", etc.) applies to the full name and is not repeated per\nsegment."]}),"\n",(0,t.jsxs)(n.li,{children:["Each segment MUST be non-empty and MUST conform to the server's existing rules for\nchannel name characters, excluding ",(0,t.jsx)(n.code,{children:"/"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Consecutive slashes (",(0,t.jsx)(n.code,{children:"//"}),") are not permitted."]}),"\n",(0,t.jsx)(n.li,{children:"A trailing slash is not permitted."}),"\n",(0,t.jsx)(n.li,{children:"Segment matching MUST follow the same case-folding rules as ordinary channel names."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Servers MUST reject channel names that violate these rules with ",(0,t.jsx)(n.code,{children:"ERR_BADCHANMASK"})," (476)."]}),"\n",(0,t.jsx)(n.h2,{id:"isupport-token",children:"ISUPPORT Token"}),"\n",(0,t.jsxs)(n.p,{children:["Servers MUST advertise the maximum permitted channel name depth via the ",(0,t.jsx)(n.code,{children:"CHANLEVELS"})," token\nin RPL_ISUPPORT (005):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:":server 005 nick CHANLEVELS=2 :are supported by this server\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The default value when only ",(0,t.jsx)(n.code,{children:"rsr.chat/channel-categories"})," is negotiated (without\n",(0,t.jsx)(n.code,{children:"rsr.chat/guild"}),") is ",(0,t.jsx)(n.code,{children:"CHANLEVELS=2"}),", permitting one category level and one leaf channel\n(e.g. ",(0,t.jsx)(n.code,{children:"#category/channel"}),")."]}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:"rsr.chat/guild"})," is additionally negotiated the value MUST be ",(0,t.jsx)(n.code,{children:"CHANLEVELS=3"}),",\npermitting a guild prefix, one category, and one leaf channel\n(e.g. ",(0,t.jsx)(n.code,{children:"#guild/category/channel"}),")."]}),"\n",(0,t.jsxs)(n.p,{children:["Servers MUST NOT advertise a ",(0,t.jsx)(n.code,{children:"CHANLEVELS"})," value less than 2 when this capability is active,\nand MUST NOT advertise a value greater than 3 unless a future extension explicitly permits\nit."]}),"\n",(0,t.jsxs)(n.p,{children:["If the server's depth limit changes (e.g. after a configuration reload), a fresh\n",(0,t.jsx)(n.code,{children:"RPL_ISUPPORT"})," MUST be sent to all connected clients reflecting the updated value."]}),"\n",(0,t.jsx)(n.h2,{id:"category-semantics",children:"Category Semantics"}),"\n",(0,t.jsxs)(n.p,{children:["Categories are implicit namespaces derived from channel names. They are not themselves\njoinable channels. A server hosting ",(0,t.jsx)(n.code,{children:"#engineering/general"})," and ",(0,t.jsx)(n.code,{children:"#engineering/deploys"})," has\nan implicit ",(0,t.jsx)(n.code,{children:"#engineering"})," category but does not thereby create a ",(0,t.jsx)(n.code,{children:"#engineering"})," channel\nunless that channel is independently created."]}),"\n",(0,t.jsx)(n.p,{children:"Clients SHOULD use category information to group channels in their UI. Servers MAY expose\na category listing command or numeric; such commands are outside the scope of this\nspecification."}),"\n",(0,t.jsx)(n.h2,{id:"client-behaviour",children:"Client Behaviour"}),"\n",(0,t.jsx)(n.p,{children:"Clients that negotiate this capability MAY join and create channels with slash-delimited\nnames, subject to the depth limit advertised in CHANLEVELS."}),"\n",(0,t.jsxs)(n.p,{children:["Clients that have not negotiated ",(0,t.jsx)(n.code,{children:"rsr.chat/channel-categories"})," MAY still join and\nparticipate in channels whose names contain forward slashes, provided the channel already\nexists. To such clients, a name like ",(0,t.jsx)(n.code,{children:"#engineering/general"})," is an opaque string and is\ntreated identically to any other channel name. No hierarchy is implied or exposed on the\nclient side."]}),"\n",(0,t.jsxs)(n.p,{children:["Servers MUST permit a JOIN from a non-negotiating client targeting an existing\nslash-named channel and MUST NOT reply with ",(0,t.jsx)(n.code,{children:"ERR_BADCHANMASK"})," (476) solely on the basis\nthat the name contains a slash. The client will receive the standard JOIN response,\n",(0,t.jsx)(n.code,{children:"RPL_TOPIC"}),", ",(0,t.jsx)(n.code,{children:"RPL_NAMREPLY"}),", and so on, as it would for any other channel."]}),"\n",(0,t.jsx)(n.h3,{id:"example-non-negotiating-client-joins-an-existing-hierarchical-channel",children:"Example: non-negotiating client joins an existing hierarchical channel"}),"\n",(0,t.jsx)(n.p,{children:"(Server hosts #engineering/general, created by a client that negotiated the capability)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"C: JOIN #engineering/general   (capability not negotiated)\nS: :alice!alice@host JOIN #engineering/general\nS: :server 332 alice #engineering/general :Engineering general chat\nS: :server 353 alice = #engineering/general :alice bob\nS: :server 366 alice #engineering/general :End of /NAMES list\n"})}),"\n",(0,t.jsx)(n.h3,{id:"example-non-negotiating-client-attempts-to-create-a-new-hierarchical-channel",children:"Example: non-negotiating client attempts to create a new hierarchical channel"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"C: JOIN #newcategory/newchannel   (capability not negotiated, channel does not exist)\nS: :server 476 alice #newcategory/newchannel :Bad channel mask\n"})}),"\n",(0,t.jsx)(n.h2,{id:"server-behaviour",children:"Server Behaviour"}),"\n",(0,t.jsxs)(n.p,{children:["Servers MUST enforce the CHANLEVELS depth limit at channel creation and join time. Attempts\nto join or create a channel whose depth exceeds the advertised limit MUST be rejected with\n",(0,t.jsx)(n.code,{children:"ERR_BADCHANMASK"})," (476)."]}),"\n",(0,t.jsx)(n.p,{children:"Servers MUST NOT silently truncate or rewrite channel names to fit within the depth limit."}),"\n",(0,t.jsx)(n.h2,{id:"guild-integration",children:"Guild Integration"}),"\n",(0,t.jsxs)(n.p,{children:["When a client has negotiated both ",(0,t.jsx)(n.code,{children:"rsr.chat/channel-categories"})," and ",(0,t.jsx)(n.code,{children:"rsr.chat/guild"}),", the\noutermost segment of a depth-3 channel name is treated as a guild identifier:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"#<guild>/<category>/<leaf>\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The guild segment identifies a top-level organisational boundary (analogous to a server\nor workspace in other platforms). Guild membership, creation, and governance are defined\nby the ",(0,t.jsx)(n.code,{children:"rsr.chat/guild"})," specification. The categories extension does not define guild\nsemantics beyond the naming structure described here."]}),"\n",(0,t.jsxs)(n.p,{children:["Depth-2 names (",(0,t.jsx)(n.code,{children:"#category/leaf"}),") remain valid when ",(0,t.jsx)(n.code,{children:"rsr.chat/guild"})," is negotiated and are\ninterpreted as guild-unaffiliated channels."]}),"\n",(0,t.jsx)(n.h2,{id:"rbac-and-advanced-moderation-scoping",children:"RBAC and Advanced Moderation Scoping"}),"\n",(0,t.jsxs)(n.p,{children:["When a client has negotiated ",(0,t.jsx)(n.code,{children:"rsr.chat/channel-categories"})," alongside ",(0,t.jsx)(n.code,{children:"rsr.chat/rbac"}),",\n",(0,t.jsx)(n.code,{children:"rsr.chat/advanced-moderation"}),", or both, rules defined by those capabilities MAY be scoped\nto a category prefix rather than a single channel. A scoped rule applies to all leaf\nchannels whose name begins with the specified prefix."]}),"\n",(0,t.jsx)(n.p,{children:"A category scope is expressed as a channel sigil followed by the category segments and a\ntrailing slash:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"#engineering/\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This denotes the category scope covering all channels of the form ",(0,t.jsx)(n.code,{children:"#engineering/<leaf>"}),".\nWhen ",(0,t.jsx)(n.code,{children:"rsr.chat/guild"})," is active, a guild-level scope MAY also be expressed:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"#myguild/\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This denotes all channels of the form ",(0,t.jsx)(n.code,{children:"#myguild/<anything>"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Scoped rules MUST be evaluated after any channel-specific rules and before server-wide\ndefaults. If a channel-specific rule and a category-scoped rule conflict, the\nchannel-specific rule takes precedence. If a category-scoped rule and a guild-scoped rule\nconflict, the category-scoped rule takes precedence."}),"\n",(0,t.jsxs)(n.p,{children:["The specific syntax for defining and querying scoped rules is defined by the ",(0,t.jsx)(n.code,{children:"rsr.chat/rbac"}),"\nand ",(0,t.jsx)(n.code,{children:"rsr.chat/advanced-moderation"})," specifications respectively. This extension only defines\nthe scoping identifier format and precedence order."]}),"\n",(0,t.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(n.h3,{id:"negotiation-and-joining-a-categorised-channel",children:"Negotiation and joining a categorised channel"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"C: CAP LS 302\nS: CAP * LS :rsr.chat/channel-categories rsr.chat/guild\nC: CAP REQ :rsr.chat/channel-categories\nS: CAP * ACK :rsr.chat/channel-categories\nC: NICK alice\nC: USER alice 0 * :Alice\nS: 005 alice CHANLEVELS=2 :are supported by this server\nS: 001 alice :Welcome to the network\n\nC: JOIN #engineering/general\nS: :alice!alice@host JOIN #engineering/general\n"})}),"\n",(0,t.jsx)(n.h3,{id:"depth-limit-exceeded",children:"Depth limit exceeded"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"C: JOIN #engineering/backend/general\nS: :server 476 alice #engineering/backend/general :Bad channel mask\n"})}),"\n",(0,t.jsx)(n.h3,{id:"guild-level-naming-with-rsrchatguild-negotiated",children:"Guild-level naming with rsr.chat/guild negotiated"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"C: CAP REQ :rsr.chat/channel-categories rsr.chat/guild\nS: CAP * ACK :rsr.chat/channel-categories rsr.chat/guild\nS: 005 alice CHANLEVELS=3 :are supported by this server\n\nC: JOIN #acmecorp/engineering/general\nS: :alice!alice@host JOIN #acmecorp/engineering/general\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453(e,n,i){i.d(n,{R:()=>s,x:()=>c});var a=i(6540);const t={},r=a.createContext(t);function s(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);